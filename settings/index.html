<!doctype html>
<html>
    <head>
		<script type="text/javascript" src="/manager/webserver/assets/js/jquery.js"></script>
		
		<style>
			input {
				font-size:16px;
				width: 200px;
				border: 1px dotted #000;
			}
			label {
				width: 150px;
			}
		</style>
		
    </head>
    <body>

        <h1>Synology Surveillance Station</h1>
        <p data-i18n="settings.intro">On this page you can manage settings that apply to all your Synology Surveillance Station devices.</p>
       
        <fieldset>
            <legend data-i18n="settings.mailsettings">Mail settings</legend>

            <div class="field row">
                <label for="username" data-i18n="settings.username">Mail username</label>
                <input id="username" type="text" value="" />
            </div>
            <div class="field row">
                <label for="password" data-i18n="settings.password">Mail password</label>
                <input id="password" type="password" value="" />
            </div>
            <div class="field row">
                <label for="hostname" data-i18n="settings.hostname">SMTP server</label>
                <input id="hostname" type="text" value="" placeholder="mail.yourdomain.com" />
            </div>
            <div class="field row">
                <label for="port" data-i18n="settings.port">SMTP port</label>
                <input id="port" type="text" value="" placeholder="25"/>
            </div>
            <div class="field row">
                <label for="sender" data-i18n="settings.sender">Sender address</label>
                <input id="sender" type="text" value="" placeholder="you@yourdomain.com"/>
            </div>

        </fieldset>

        <button class="right" onclick="save()" data-i18n="pair.start.saveSettings">Save changes</button>

        <script type="text/javascript">
        function onHomeyReady(){
	        Homey.get('mail_user', function(err, username){
		       if( err ) return console.error('Could not get username', err);
		       $('#username').val(username); 
		    });
		    
		    Homey.get('mail_password', function(err, password){
		       if( err ) return console.error('Could not get mail_password', err);
		       $('#password').val(password); 
		    });
		    
		    Homey.get('mail_host', function(err, mail_host){
		       if( err ) return console.error('Could not get mail_host', err);
		       $('#hostname').val(mail_host); 
		    });
		    
		    Homey.get('mail_port', function(err, mail_port){
		       if( err ) return console.error('Could not get mail_port', err);
		       $('#port').val(mail_port); 
		    });
		    
		    Homey.get('mail_from', function(err, mail_sender){
		       if( err ) return console.error('Could not get mail_sender', err);
		       $('#sender').val(mail_sender); 
		    });
		    
            Homey.ready();
        }

        function save() {
            Homey.set('mail_user', document.getElementById('username').value);
            Homey.set('mail_password', document.getElementById('password').value);
            Homey.set('mail_host', document.getElementById('hostname').value);
            Homey.set('mail_port', document.getElementById('port').value);
            Homey.set('mail_from', document.getElementById('sender').value);
            
            console.log ("saved the settings!");
            alert('Settings saved!');
        }
        </script>

    </body>
</html>